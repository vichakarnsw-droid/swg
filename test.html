<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ลงทะเบียนโครงการเพชรสามร้อยยอด</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .required::after { content: ' *'; color: #ef4444; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Header -->
    <div class="bg-white shadow-lg">
        <div class="max-w-4xl mx-auto px-6 py-8">
            <div class="flex items-center justify-center space-x-4">
                <div class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center">
                    <svg class="w-12 h-12 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                    </svg>
                </div>
                <div class="text-center">
                    <h1 class="text-3xl font-bold text-gray-800">โครงการเพชรสามร้อยยอด</h1>
                    <p class="text-lg text-gray-600 mt-2">ระบบลงทะเบียนการแข่งขันทดสอบความรู้</p>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-4xl mx-auto px-6 py-8">
        <!-- Registration Form -->
        <div id="registrationForm" class="bg-white rounded-xl shadow-xl p-8">
            <form id="mainForm">
                <!-- ส่วนที่ 1: ข้อมูลนักเรียน -->
                <div class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">
                        ส่วนที่ 1: ข้อมูลนักเรียน
                    </h2>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2 required">เลขบัตรประจำตัวประชาชน</label>
                            <input type="text" id="studentId" name="studentId" required 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                   placeholder="กรอกเลขบัตรประจำตัวประชาชน 13 หลัก" maxlength="13">
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">คำนำหน้าชื่อ</label>
                                <select id="studentPrefix" name="studentPrefix" required 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">เลือกคำนำหน้าชื่อ</option>
                                    <option value="เด็กชาย">เด็กชาย</option>
                                    <option value="เด็กหญิง">เด็กหญิง</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">ชื่อ</label>
                                <input type="text" id="studentFirstName" name="studentFirstName" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="กรอกชื่อ">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">นามสกุล</label>
                                <input type="text" id="studentLastName" name="studentLastName" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="กรอกนามสกุล">
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">ระดับชั้น</label>
                                <select id="studentGrade" name="studentGrade" required 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">เลือกระดับชั้น</option>
                                    <option value="ป.4">ป.4</option>
                                    <option value="ป.5">ป.5</option>
                                    <option value="ป.6">ป.6</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">เบอร์โทรศัพท์</label>
                                <input type="tel" id="studentPhone" name="studentPhone" 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="กรอกเบอร์โทรศัพท์">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">อีเมล</label>
                            <input type="email" id="studentEmail" name="studentEmail" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                   placeholder="กรอกอีเมล">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2 required">ชื่อโรงเรียน</label>
                            <input type="text" id="studentSchool" name="studentSchool" required 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                   placeholder="กรอกชื่อโรงเรียน">
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">จังหวัด</label>
                                <select id="studentProvince" name="studentProvince" required 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        onchange="updateDistricts()">
                                    <option value="">เลือกจังหวัด</option>
                                    <option value="กรุงเทพมหานคร">กรุงเทพมหานคร</option>
                                    <option value="กระบี่">กระบี่</option>
                                    <option value="กาญจนบุรี">กาญจนบุรี</option>
                                    <option value="กาฬสินธุ์">กาฬสินธุ์</option>
                                    <option value="กำแพงเพชร">กำแพงเพชร</option>
                                    <option value="ขอนแก่น">ขอนแก่น</option>
                                    <option value="จันทบุรี">จันทบุรี</option>
                                    <option value="ฉะเชิงเทรา">ฉะเชิงเทรา</option>
                                    <option value="ชลบุรี">ชลบุรี</option>
                                    <option value="ชัยนาท">ชัยนาท</option>
                                    <option value="ชัยภูมิ">ชัยภูมิ</option>
                                    <option value="ชุมพร">ชุมพร</option>
                                    <option value="เชียงราย">เชียงราย</option>
                                    <option value="เชียงใหม่">เชียงใหม่</option>
                                    <option value="ตรัง">ตรัง</option>
                                    <option value="ตราด">ตราด</option>
                                    <option value="ตาก">ตาก</option>
                                    <option value="นครนายก">นครนายก</option>
                                    <option value="นครปฐม">นครปฐม</option>
                                    <option value="นครพนม">นครพนม</option>
                                    <option value="นครราชสีมา">นครราชสีมา</option>
                                    <option value="นครศรีธรรมราช">นครศรีธรรมราช</option>
                                    <option value="นครสวรรค์">นครสวรรค์</option>
                                    <option value="นนทบุรี">นนทบุรี</option>
                                    <option value="นราธิวาส">นราธิวาส</option>
                                    <option value="น่าน">น่าน</option>
                                    <option value="บึงกาฬ">บึงกาฬ</option>
                                    <option value="บุรีรัมย์">บุรีรัมย์</option>
                                    <option value="ปทุมธานี">ปทุมธานี</option>
                                    <option value="ประจวบคีรีขันธ์">ประจวบคีรีขันธ์</option>
                                    <option value="ปราจีนบุรี">ปราจีนบุรี</option>
                                    <option value="ปัตตานี">ปัตตานี</option>
                                    <option value="พระนครศรีอยุธยา">พระนครศรีอยุธยา</option>
                                    <option value="พังงา">พังงา</option>
                                    <option value="พัทลุง">พัทลุง</option>
                                    <option value="พิจิตร">พิจิตร</option>
                                    <option value="พิษณุโลก">พิษณุโลก</option>
                                    <option value="เพชรบุรี">เพชรบุรี</option>
                                    <option value="เพชรบูรณ์">เพชรบูรณ์</option>
                                    <option value="แพร่">แพร่</option>
                                    <option value="ภูเก็ต">ภูเก็ต</option>
                                    <option value="มหาสารคาม">มหาสารคาม</option>
                                    <option value="มุกดาหาร">มุกดาหาร</option>
                                    <option value="แม่ฮ่องสอน">แม่ฮ่องสอน</option>
                                    <option value="ยโสธร">ยโสธร</option>
                                    <option value="ยะลา">ยะลา</option>
                                    <option value="ร้อยเอ็ด">ร้อยเอ็ด</option>
                                    <option value="ระนอง">ระนอง</option>
                                    <option value="ระยอง">ระยอง</option>
                                    <option value="ราชบุรี">ราชบุรี</option>
                                    <option value="ลพบุรี">ลพบุรี</option>
                                    <option value="ลำปาง">ลำปาง</option>
                                    <option value="ลำพูน">ลำพูน</option>
                                    <option value="เลย">เลย</option>
                                    <option value="ศรีสะเกษ">ศรีสะเกษ</option>
                                    <option value="สกลนคร">สกลนคร</option>
                                    <option value="สงขลา">สงขลา</option>
                                    <option value="สตูล">สตูล</option>
                                    <option value="สมุทรปราการ">สมุทรปราการ</option>
                                    <option value="สมุทรสงคราม">สมุทรสงคราม</option>
                                    <option value="สมุทรสาคร">สมุทรสาคร</option>
                                    <option value="สระแก้ว">สระแก้ว</option>
                                    <option value="สระบุรี">สระบุรี</option>
                                    <option value="สิงห์บุรี">สิงห์บุรี</option>
                                    <option value="สุโขทัย">สุโขทัย</option>
                                    <option value="สุพรรณบุรี">สุพรรณบุรี</option>
                                    <option value="สุราษฎร์ธานี">สุราษฎร์ธานี</option>
                                    <option value="สุรินทร์">สุรินทร์</option>
                                    <option value="หนองคาย">หนองคาย</option>
                                    <option value="หนองบัวลำภู">หนองบัวลำภู</option>
                                    <option value="อ่างทอง">อ่างทอง</option>
                                    <option value="อำนาจเจริญ">อำนาจเจริญ</option>
                                    <option value="อุดรธานี">อุดรธานี</option>
                                    <option value="อุตรดิตถ์">อุตรดิตถ์</option>
                                    <option value="อุทัยธานี">อุทัยธานี</option>
                                    <option value="อุบลราชธานี">อุบลราชธานี</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">อำเภอ</label>
                                <select id="studentDistrict" name="studentDistrict" required 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">เลือกจังหวัดก่อน</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ส่วนที่ 2: ข้อมูลผู้ปกครอง -->
                <div class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b-2 border-green-500 pb-2">
                        ส่วนที่ 2: ข้อมูลผู้ปกครอง
                    </h2>
                    
                    <div class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">คำนำหน้าชื่อ</label>
                                <select id="parentPrefix" name="parentPrefix" required 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">เลือกคำนำหน้าชื่อ</option>
                                    <option value="นาย">นาย</option>
                                    <option value="นางสาว">นางสาว</option>
                                    <option value="นาง">นาง</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">ชื่อ</label>
                                <input type="text" id="parentFirstName" name="parentFirstName" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="กรอกชื่อผู้ปกครอง">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">นามสกุล</label>
                                <input type="text" id="parentLastName" name="parentLastName" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="กรอกนามสกุลผู้ปกครอง">
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">เบอร์โทรศัพท์</label>
                                <input type="tel" id="parentPhone" name="parentPhone" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="กรอกเบอร์โทรศัพท์ผู้ปกครอง">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">อีเมล</label>
                                <input type="email" id="parentEmail" name="parentEmail" 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="กรอกอีเมลผู้ปกครอง">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ส่วนที่ 3: ยืนยันการลงทะเบียน -->
                <div class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b-2 border-orange-500 pb-2">
                        ส่วนที่ 3: ยืนยันการลงทะเบียน
                    </h2>
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6">
                        <h3 class="text-lg font-medium text-yellow-800 mb-2">📋 ข้อมูลการโอนเงิน</h3>
                        <p class="text-yellow-700 mb-4">กรุณาโอนเงินค่าสมัครจำนวน <span class="font-bold">500 บาท</span> ไปยังบัญชี:</p>
                        <div class="bg-white rounded-lg p-4 border">
                            <div class="flex items-center space-x-3 mb-2">
                                <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center">
                                    <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
                                        <path d="M9 12l2 2 4-4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <p class="font-medium text-lg">ธนาคารกรุงไทย</p>
                            </div>
                            <p>เลขที่บัญชี: <span class="font-mono font-bold">123-4-56789-0</span></p>
                            <p>ชื่อบัญชี: โรงเรียนสามร้อยยอด</p>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2 required">อัปโหลดสลิปการโอนเงิน</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors">
                            <input type="file" id="paymentSlip" name="paymentSlip" accept="image/*" required 
                                   class="hidden" onchange="handleFileUpload(this)">
                            <label for="paymentSlip" class="cursor-pointer">
                                <div class="text-gray-400 mb-2">
                                    <svg class="mx-auto h-12 w-12" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <p class="text-sm text-gray-600">คลิกเพื่อเลือกไฟล์รูปภาพ</p>
                                <p class="text-xs text-gray-400 mt-1">รองรับไฟล์ JPG, PNG, GIF</p>
                            </label>
                        </div>
                        <div id="filePreview" class="mt-4 hidden">
                            <div class="flex items-center space-x-3 bg-green-50 border border-green-200 rounded-lg p-3">
                                <svg class="h-5 w-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                </svg>
                                <span id="fileName" class="text-sm text-green-700"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="text-center">
                    <button type="submit" 
                            class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:from-blue-700 hover:to-purple-700 transform hover:scale-105 transition-all duration-200 shadow-lg">
                        📝 ลงทะเบียนเข้าร่วมโครงการ
                    </button>
                </div>
            </form>
        </div>

        <!-- Confirmation Page -->
        <div id="confirmationPage" class="bg-white rounded-xl shadow-xl p-8 hidden">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                </div>
                <h2 class="text-3xl font-bold text-green-600 mb-2">ลงทะเบียนสำเร็จ!</h2>
                <p class="text-gray-600">ข้อมูลการลงทะเบียนของคุณได้รับการบันทึกเรียบร้อยแล้ว</p>
            </div>

            <div id="confirmationData" class="space-y-6 mb-8">
                <!-- Data will be populated here -->
            </div>

            <div class="text-center space-x-4">
                <button onclick="resetForm()" 
                        class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                    ลงทะเบียนคนต่อไป
                </button>
                <button onclick="window.print()" 
                        class="bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors">
                    พิมพ์ข้อมูล
                </button>
            </div>
        </div>
    </div>

    <script>
        // ข้อมูลอำเภอแยกตามจังหวัด (ตัวอย่างบางจังหวัด)
        const districts = {
            'กรุงเทพมหานคร': ['พระนคร', 'ดุสิต', 'หนองจอก', 'บางรัก', 'บางเขน', 'บางกะปิ', 'ปทุมวัน', 'ป้อมปราบศัตรูพ่าย', 'พระโขนง', 'มีนบุรี', 'ลาดกระบัง', 'ยานนาวา', 'สัมพันธวงศ์', 'พญาไท', 'ธนบุรี', 'บางกอกใหญ่', 'ห้วยขวาง', 'คลองสาน', 'ตลิ่งชัน', 'บางกอกน้อย', 'บางขุนเทียน', 'บางซื่อ', 'จตุจักร', 'บางปลัด', 'ดินแดง', 'บึงกุ่ม', 'สาทร', 'บางนา', 'ประเวศ', 'คลองเตย', 'สวนหลวง', 'จอมทอง', 'ดอนเมือง', 'ราชเทวี', 'ลาดพร้าว', 'วัฒนา', 'บางแค', 'หลักสี่', 'สายไหม', 'คันนายาว', 'สะพานพุทธ', 'วังทองหลาง', 'คลองสามวา', 'บางนา', 'ทุ่งครุ', 'บางบอน', 'ราษฎร์บูรณะ', 'ทวีวัฒนา', 'หนองแขม'],
            'เชียงใหม่': ['เมืองเชียงใหม่', 'จอมทอง', 'แม่ริม', 'แม่แตง', 'แม่อาย', 'ฝาง', 'ไชยปราการ', 'แม่วาง', 'สะเมิง', 'แม่ออน', 'ดอยสะเก็ด', 'ฮอด', 'สันทราย', 'สันกำแพง', 'สันป่าตอง', 'หางดง', 'ดอยเต่า', 'อมก๋อย', 'เวียงแหง', 'ดอยหล่อ', 'เชียงดาว', 'แม่ทะ', 'แม่ลาน้อย', 'แม่ลาใหญ่', 'กัลยาณิวัฒนา'],
            'ขอนแก่น': ['เมืองขอนแก่น', 'บ้านไผ่', 'น้ำพอง', 'อุบลรัตน์', 'กระนวน', 'หนองเรือ', 'บ้านฝาง', 'เปือยน้อย', 'โคกโพธิ์ไชย', 'หนองสองห้อง', 'ภูเวียง', 'มัญจาคีรี', 'ชุมแพ', 'สีชมพู', 'หนองนาคำ', 'บ้านแฮด', 'โนนศิลา', 'ซำสูง', 'กุดรัง', 'ภูผาม่าน', 'วาริชภูมิ', 'หนองวัวซอ', 'แวงใหญ่', 'แวงน้อย', 'เวียงเก่า'],
            'นครราชสีมา': ['เมืองนครราชสีมา', 'ครบุรี', 'คง', 'บัวใหญ่', 'ประทาย', 'ปักธงชัย', 'ดอนพุด', 'เสิงสาง', 'โนนแดง', 'โนนไทย', 'ขามสะแกแสง', 'ขามทะเลสอ', 'สีดา', 'ชุมพวง', 'โชคชัย', 'หนองบุนนาก', 'บัวลาย', 'สูงเนิน', 'กุดจับ', 'พระทองคำ', 'พิมาย', 'ห้วยแถลง', 'เฉลิมพระเกียรติ', 'วังน้ำเขียว', 'เทพารักษ์', 'มวกเหล็ก', 'ลำทะเมนชัย', 'สีคิ้ว', 'ปากช่อง', 'หนองสะอาด', 'เมืองยาง', 'ด่านขุนทด'],
            'ภูเก็ต': ['เมืองภูเก็ต', 'กะทู้', 'ถลาง'],
            'สงขลา': ['เมืองสงขลา', 'บางกล่ำ', 'คลองหอยโข่ง', 'คลองแงะ', 'รัตภูมิ', 'สะเดา', 'หาดใหญ่', 'นาทวี', 'เทพา', 'จะนะ', 'สะบ้าย้อย', 'ระโนด', 'กระแสสินธุ์', 'สิงหนคร', 'ควนเนียง', 'บางคล้า'],
            'กาญจนบุรี': ['เมืองกาญจนบุรี', 'ไทรโยค', 'บ่อพลอย', 'ศรีสวัสดิ์', 'ท่าม่วง', 'ท่าม่วง', 'พนมทวน', 'เลาขวัญ', 'ด่านมะขามเตี้ย', 'หนองปรือ', 'ห้วยกระเจา', 'ทองผาภูมิ', 'สังขละบุรี'],
            'ระยอง': ['เมืองระยอง', 'บ้านฉาง', 'แกลง', 'วังจันทร์', 'บ้านค่าย', 'ปลวกแดง', 'เขาชะเมา', 'นิคมพัฒนา'],
            'ชลบุรี': ['เมืองชลบุรี', 'บางละมุง', 'ศรีราชา', 'บ่อทอง', 'บ้านบึง', 'พานทอง', 'พนัสนิคม', 'หนองใหญ่', 'บางปะกง', 'หนองใหญ่', 'เกาะสีชัง', 'สัตหีบ', 'บ่อวิน'],
            'นครศรีธรรมราช': ['เมืองนครศรีธรรมราช', 'พรหมคีรี', 'ลานสกา', 'ฉวาง', 'พิปูน', 'เชียรใหญ่', 'ท่าศาลา', 'ทุ่งสง', 'ปากพนัง', 'ร่อนพิบูลย์', 'สิชล', 'ขนอม', 'หัวไทร', 'บางขัน', 'ทุ่งใหญ่', 'นบพิตำ', 'ช้างกลาง', 'จุฬาภรณ์', 'พระพรหม', 'นพพิตำ', 'บางขัน', 'ท่าศาลา', 'ชะอวด']
        };

        function updateDistricts() {
            const provinceSelect = document.getElementById('studentProvince');
            const districtSelect = document.getElementById('studentDistrict');
            const selectedProvince = provinceSelect.value;
            
            // Clear existing options
            districtSelect.innerHTML = '<option value="">เลือกอำเภอ</option>';
            
            if (selectedProvince && districts[selectedProvince]) {
                districts[selectedProvince].forEach(district => {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
            } else {
                districtSelect.innerHTML = '<option value="">เลือกจังหวัดก่อน</option>';
            }
        }

        function handleFileUpload(input) {
            const file = input.files[0];
            if (file) {
                const fileName = document.getElementById('fileName');
                const filePreview = document.getElementById('filePreview');
                
                fileName.textContent = file.name;
                filePreview.classList.remove('hidden');
            }
        }

        document.getElementById('mainForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate required fields
            const requiredFields = [
                'studentId', 'studentPrefix', 'studentFirstName', 'studentLastName', 'studentGrade',
                'studentSchool', 'studentProvince', 'studentDistrict',
                'parentPrefix', 'parentFirstName', 'parentLastName', 'parentPhone',
                'paymentSlip'
            ];
            
            let isValid = true;
            for (let field of requiredFields) {
                const element = document.getElementById(field);
                if (!element.value) {
                    element.classList.add('border-red-500');
                    isValid = false;
                } else {
                    element.classList.remove('border-red-500');
                }
            }
            
            if (!isValid) {
                alert('กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน');
                return;
            }

            // Validate ID card number
            const studentId = document.getElementById('studentId').value;
            if (studentId.length !== 13 || !/^\d+$/.test(studentId)) {
                alert('กรุณากรอกเลขบัตรประจำตัวประชาชนให้ถูกต้อง (13 หลัก)');
                return;
            }

            // Collect form data
            const formData = {
                studentId: document.getElementById('studentId').value,
                studentPrefix: document.getElementById('studentPrefix').value,
                studentFirstName: document.getElementById('studentFirstName').value,
                studentLastName: document.getElementById('studentLastName').value,
                studentGrade: document.getElementById('studentGrade').value,
                studentPhone: document.getElementById('studentPhone').value,
                studentEmail: document.getElementById('studentEmail').value,
                studentSchool: document.getElementById('studentSchool').value,
                studentProvince: document.getElementById('studentProvince').value,
                studentDistrict: document.getElementById('studentDistrict').value,
                parentPrefix: document.getElementById('parentPrefix').value,
                parentFirstName: document.getElementById('parentFirstName').value,
                parentLastName: document.getElementById('parentLastName').value,
                parentPhone: document.getElementById('parentPhone').value,
                parentEmail: document.getElementById('parentEmail').value,
                paymentSlip: document.getElementById('paymentSlip').files[0]?.name || 'ไฟล์ที่อัปโหลด',
                timestamp: new Date().toLocaleString('th-TH')
            };

            // Show confirmation page
            showConfirmation(formData);
            
            // Send data to Google Sheets
            submitToGoogleSheets(formData);
        });

        function showConfirmation(data) {
            document.getElementById('registrationForm').classList.add('hidden');
            document.getElementById('confirmationPage').classList.remove('hidden');
            
            const confirmationData = document.getElementById('confirmationData');
            confirmationData.innerHTML = `
                <div class="bg-blue-50 rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-blue-800 mb-4">ข้อมูลนักเรียน</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div><span class="font-medium">เลขบัตรประชาชน:</span> ${data.studentId}</div>
                        <div><span class="font-medium">ชื่อ-นามสกุล:</span> ${data.studentPrefix}${data.studentFirstName} ${data.studentLastName}</div>
                        <div><span class="font-medium">ระดับชั้น:</span> ${data.studentGrade}</div>
                        <div><span class="font-medium">เบอร์โทร:</span> ${data.studentPhone || '-'}</div>
                        <div class="md:col-span-2"><span class="font-medium">อีเมล:</span> ${data.studentEmail || '-'}</div>
                        <div class="md:col-span-2"><span class="font-medium">โรงเรียน:</span> ${data.studentSchool}</div>
                        <div><span class="font-medium">จังหวัด:</span> ${data.studentProvince}</div>
                        <div><span class="font-medium">อำเภอ:</span> ${data.studentDistrict}</div>
                    </div>
                </div>
                
                <div class="bg-green-50 rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-green-800 mb-4">ข้อมูลผู้ปกครอง</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div><span class="font-medium">ชื่อ-นามสกุล:</span> ${data.parentPrefix}${data.parentFirstName} ${data.parentLastName}</div>
                        <div><span class="font-medium">เบอร์โทร:</span> ${data.parentPhone}</div>
                        <div class="md:col-span-2"><span class="font-medium">อีเมล:</span> ${data.parentEmail || '-'}</div>
                    </div>
                </div>
                
                <div class="bg-orange-50 rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-orange-800 mb-4">การยืนยันการลงทะเบียน</h3>
                    <div class="text-sm">
                        <div><span class="font-medium">สลิปการโอนเงิน:</span> ${data.paymentSlip}</div>
                        <div><span class="font-medium">วันที่ลงทะเบียน:</span> ${data.timestamp}</div>
                    </div>
                </div>
                
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                    <p class="text-yellow-800 text-sm">
                        <strong>หมายเหตุ:</strong> ทางโรงเรียนจะตรวจสอบข้อมูลและสลิปการโอนเงิน หากข้อมูลถูกต้องจะแจ้งผลการรับสมัครภายใน 3-5 วันทำการ
                    </p>
                </div>
            `;
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function resetForm() {
            document.getElementById('mainForm').reset();
            document.getElementById('filePreview').classList.add('hidden');
            document.getElementById('confirmationPage').classList.add('hidden');
            document.getElementById('registrationForm').classList.remove('hidden');
            
            // Reset district dropdown
            const districtSelect = document.getElementById('studentDistrict');
            districtSelect.innerHTML = '<option value="">เลือกจังหวัดก่อน</option>';
            
            window.scrollTo(0, 0);
        }

        // Format ID card input
        document.getElementById('studentId').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 13) value = value.slice(0, 13);
            e.target.value = value;
        });

        // Function to submit data to Google Sheets
        async function submitToGoogleSheets(formData) {
            try {
                // Show loading state
                const submitBtn = document.querySelector('button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '⏳ กำลังส่งข้อมูล...';
                submitBtn.disabled = true;

                // Prepare data as URL encoded string
                const params = new URLSearchParams();
                params.append('studentId', formData.studentId);
                params.append('studentPrefix', formData.studentPrefix);
                params.append('studentFirstName', formData.studentFirstName);
                params.append('studentLastName', formData.studentLastName);
                params.append('studentGrade', formData.studentGrade);
                params.append('studentPhone', formData.studentPhone || '');
                params.append('studentEmail', formData.studentEmail || '');
                params.append('studentSchool', formData.studentSchool);
                params.append('studentProvince', formData.studentProvince);
                params.append('studentDistrict', formData.studentDistrict);
                params.append('parentPrefix', formData.parentPrefix);
                params.append('parentFirstName', formData.parentFirstName);
                params.append('parentLastName', formData.parentLastName);
                params.append('parentPhone', formData.parentPhone);
                params.append('parentEmail', formData.parentEmail || '');
                params.append('paymentSlip', formData.paymentSlip);
                params.append('timestamp', formData.timestamp);
                params.append('status', 'รอตรวจสอบ');

                // Send using GET method with parameters
                const url = 'https://script.google.com/macros/s/AKfycbwc7css7GDA_QDVe6oYsO1dvjvJHHVVEnQVRB3xfMC5U0cUvNGmtYVF8a1wXFyDg90MDw/exec?' + params.toString();
                
                // Use fetch with GET method
                await fetch(url, {
                    method: 'GET',
                    mode: 'no-cors'
                });

                console.log('Data sent successfully to Google Sheets');
                
                // Show success message
                setTimeout(() => {
                    alert('✅ ส่งข้อมูลสำเร็จแล้ว! ทางโรงเรียนจะติดต่อกลับภายใน 3-5 วันทำการ');
                }, 1000);
                
                // Reset button after delay
                setTimeout(() => {
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }, 2000);

            } catch (error) {
                console.error('Error sending data:', error);
                
                // Show error message
                alert('⚠️ เกิดข้อผิดพลาดในการส่งข้อมูล กรุณาลองใหม่อีกครั้ง หรือติดต่อเจ้าหน้าที่');
                
                // Reset button
                const submitBtn = document.querySelector('button[type="submit"]');
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }


    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98449e0ec164d022',t:'MTc1ODc0MTM5OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
